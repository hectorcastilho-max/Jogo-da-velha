<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Damas Clássicas</title>
<style>
:root {
  --board-color-light: #f0d9b5;
  --board-color-dark: #b58863;
  --piece-white: #ffffff;
  --piece-black: #222222;
  --accent: #3b82f6;
  --text: #1f2937;
}
body {
  margin:0;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  font-family:Inter, sans-serif;
  background: linear-gradient(135deg, #f7f3e9, #e6dcd0);
}
h1 {margin-bottom:10px; color:var(--text);}
#board {display:grid; grid-template-columns: repeat(8, 60px); grid-template-rows: repeat(8, 60px); box-shadow: 0 8px 24px rgba(0,0,0,0.2);}
.cell {
  width:60px; height:60px; display:flex; align-items:center; justify-content:center;
}
.cell.light {background: var(--board-color-light);}
.cell.dark {background: var(--board-color-dark); cursor:pointer; position:relative;}
.piece {
  width:45px; height:45px; border-radius:50%; box-shadow:0 4px 8px rgba(0,0,0,0.3); display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px; color:#000; transition: transform 0.1s;
}
.piece.white {background: var(--piece-white);}
.piece.black {background: var(--piece-black); color: #fff;}
.piece.dama {border: 2px solid var(--accent);}
.controls {margin-top:15px; display:flex; gap:10px;}
button {padding:8px 12px; border:none; border-radius:10px; cursor:pointer; font-weight:600; transition: 0.2s;}
button:hover {transform:translateY(-2px);}
.btn-primary {background:linear-gradient(90deg,var(--accent),#60a5fa); color:white;}
#status {margin-top:10px; font-weight:600;}
</style>
</head>
<body>

<h1>Damas Clássicas</h1>
<div id="board"></div>
<div id="status">Turno: Jogador Branco</div>
<div class="controls">
  <button id="restartBtn" class="btn-primary">Reiniciar</button>
  <button id="backBtn">← Menu</button>
  <button id="muteBtn">Música: On</button>
</div>

<audio id="bgAudio" loop autoplay>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_3a6d3f9d8e.mp3?filename=calm-classical-110598.mp3" type="audio/mpeg">
</audio>
<audio id="hoverSound">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_7b2d90a43a.mp3?filename=soft-click-112002.mp3" type="audio/mpeg">
</audio>
<audio id="clickSound">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_ef6d3df37a.mp3?filename=ui-click-112008.mp3" type="audio/mpeg">
</audio>

<script>
// ==== CONFIGURAÇÕES INICIAIS ====
const board = document.getElementById('board');
const status = document.getElementById('status');
const restartBtn = document.getElementById('restartBtn');
const backBtn = document.getElementById('backBtn');
const muteBtn = document.getElementById('muteBtn');
const bgAudio = document.getElementById('bgAudio');
const hoverSound = document.getElementById('hoverSound');
const clickSound = document.getElementById('clickSound');

let boardState = [];
let selectedPiece = null;
let currentPlayer = 'white';

// ==== FUNÇÕES DE ÁUDIO ====
document.querySelectorAll('button').forEach(btn=>{
  btn.addEventListener('mouseenter', ()=> hoverSound.play());
  btn.addEventListener('click', ()=> clickSound.play());
});

// ==== CONSTRUÇÃO DO TABULEIRO ====
function createBoard(){
  board.innerHTML='';
  boardState = [];
  for(let row=0; row<8; row++){
    let rowArr = [];
    for(let col=0; col<8; col++){
      const cell = document.createElement('div');
      const isDark = (row+col)%2 !== 0;
      cell.classList.add('cell', isDark?'dark':'light');
      cell.dataset.row=row;
      cell.dataset.col=col;
      board.appendChild(cell);
      // Configura peças iniciais
      let piece=null;
      if(isDark && row<3){piece={color:'black', dama:false};}
      else if(isDark && row>4){piece={color:'white', dama:false};}
      rowArr.push(piece);
      if(piece){
        const pEl = document.createElement('div');
        pEl.classList.add('piece', piece.color);
        cell.appendChild(pEl);
      }
    }
    boardState.push(rowArr);
  }
}
createBoard();

// ==== LÓGICA SIMPLES DE MOVIMENTO (LOCAL 2J) ====
board.addEventListener('click', e=>{
  const cell = e.target.closest('.cell');
  if(!cell) return;
  const row = parseInt(cell.dataset.row);
  const col = parseInt(cell.dataset.col);
  const piece = boardState[row][col];

  if(selectedPiece){
    // Movimentar peça se estiver selecionada
    movePiece(selectedPiece.row, selectedPiece.col, row, col);
    selectedPiece=null;
  } else {
    if(piece && piece.color===currentPlayer){
      selectedPiece={row,col};
    }
  }
});

function movePiece(fromRow, fromCol, toRow, toCol){
  const piece = boardState[fromRow][fromCol];
  const target = boardState[toRow][toCol];
  if(target) return; // Só pode mover para vazio
  const rowDiff = toRow - fromRow;
  const colDiff = toCol - fromCol;
  // Movimento diagonal simples
  if(Math.abs(rowDiff)===1 && Math.abs(colDiff)===1){
    boardState[toRow][toCol]=piece;
    boardState[fromRow][fromCol]=null;
    renderBoard();
    togglePlayer();
  }
}

function renderBoard(){
  board.querySelectorAll('.cell').forEach(cell=>{
    cell.innerHTML='';
    const row = parseInt(cell.dataset.row);
    const col = parseInt(cell.dataset.col);
    const piece = boardState[row][col];
    if(piece){
      const pEl = document.createElement('div');
      pEl.className='piece '+piece.color;
      if(piece.dama) pEl.classList.add('dama');
      cell.appendChild(pEl);
    }
  });
}

function togglePlayer(){
  currentPlayer = currentPlayer==='white'?'black':'white';
  status.textContent=`Turno: Jogador ${currentPlayer==='white'?'Branco':'Preto'}`;
}

// ==== BOTOES ====
restartBtn.addEventListener('click', ()=>{createBoard(); currentPlayer='white'; status.textContent='Turno: Jogador Branco';});
backBtn.addEventListener('click', ()=>{window.open('index.html','_self');});
muteBtn.addEventListener('click', ()=>{
  if(bgAudio.paused){bgAudio.play(); muteBtn.textContent='Música: On';}
  else{bgAudio.pause(); muteBtn.textContent='Música: Off';}
});
</script>
</body>
</html>